"use strict";var recover_button,confirm_button,apply_form,recover_form,return_form,allLink,currentLocation,selectInputField,allOptionsArray,selectModalWindow,sidebarSearchForm,sidebarSearchInput,searchFieldResult,searchResult,calendarLabels,calendarInputs,main;function displaySelectValue(){var n=document.getElementById("rateSelect");document.querySelectorAll(".rate-form__option").forEach(function(e){var t;"checked"==e.getAttribute("data-checked")&&(t=e.textContent,n.value=t)})}function uncheckEverySpan(){document.querySelectorAll(".rate-form__option").forEach(function(e){e.setAttribute("data-checked","unchecked")})}document.querySelector(".auth-form__recover")&&(recover_button=document.querySelector(".auth-form__recover")).addEventListener("click",function(){apply_form.classList.toggle("js--hidden"),recover_form.classList.toggle("js--hidden")}),document.querySelector(".auth-form__continue")&&(confirm_button=document.querySelector(".auth-form__continue")).addEventListener("click",function(){recover_form.classList.toggle("js--hidden"),return_form.classList.toggle("js--hidden")}),document.querySelector(".form-apply-recover")&&(apply_form=document.querySelector(".form-apply-recover")).addEventListener("submit",function(e){e.preventDefault()}),document.querySelector(".form-recover-check")&&(recover_form=document.querySelector(".form-recover-check")).addEventListener("submit",function(e){e.preventDefault()}),document.querySelector(".form-return-login")&&(return_form=document.querySelector(".form-return-login")),document.querySelectorAll(".navigation-menu__item-link")&&(allLink=document.querySelectorAll(".navigation-menu__item-link"),currentLocation=window.location.href,allLink.forEach(function(e){var t=e.getAttribute("href").replace("./","");currentLocation.includes(t)&&e.classList.add("item--checked")})),document.getElementById("rateSelect")&&(selectInputField=document.getElementById("rateSelect"),allOptionsArray=document.querySelectorAll(".rate-form__option"),selectModalWindow=document.getElementById("rateModal"),displaySelectValue(),allOptionsArray.forEach(function(e){e.addEventListener("click",function(){uncheckEverySpan(),e.setAttribute("data-checked","checked"),displaySelectValue(),selectModalWindow.classList.remove("js--hidden"),selectInputField.classList.toggle("js--rotate-arrow")})}),selectInputField.addEventListener("click",function(){selectInputField.classList.toggle("js--rotate-arrow"),selectModalWindow.classList.toggle("js--hidden")}),selectModalWindow.addEventListener("mouseleave",function(){selectInputField.classList.toggle("js--rotate-arrow"),selectModalWindow.classList.add("js--hidden")})),document.querySelector(".search-section--form ")&&(sidebarSearchForm=document.querySelector(".search-section--form"),sidebarSearchInput=document.querySelector(".input-section__search-input"),sidebarSearchForm.addEventListener("submit",function(e){var t=sidebarSearchInput.value;localStorage.setItem("searchResult",t)})),document.getElementById("searchField")&&(searchFieldResult=document.getElementById("searchField"),searchResult=localStorage.getItem("searchResult"),console.log(localStorage.getItem("searchResult")),searchFieldResult.value=searchResult,"Платеж"==searchFieldResult.value&&(document.getElementById("fullResult").classList.remove("js--hidden"),document.getElementById("emptyResult").classList.add("js--hidden"))),document.querySelector(".blocking-form__input")&&((calendarLabels=document.querySelectorAll(".blocking-form__label")).forEach(function(e){e.addEventListener("click",function(){var t=document.querySelector(".calendar-layer");t.addEventListener("click",function(){t.classList.add("js--hidden")}),e.addEventListener("click",function(){t.classList.remove("js--hidden")}),document.querySelector(".ui-datepicker").querySelectorAll("td").forEach(function(e){e.classList.contains("ui-datepicker-unselectable")||e.addEventListener("click",function(){t.classList.add("js--hidden")})})})}),(calendarInputs=document.querySelectorAll(".form__input-form__input")).forEach(function(e){e.addEventListener("focus",function(){var t=document.querySelector(".calendar-layer");t.addEventListener("click",function(){t.classList.add("js--hidden")}),e.addEventListener("click",function(){t.classList.remove("js--hidden")}),document.querySelector(".ui-datepicker").querySelectorAll("td").forEach(function(e){e.classList.contains("ui-datepicker-unselectable")||e.addEventListener("click",function(){t.classList.add("js--hidden")})})})}),$(function(){$.datepicker.regional.ru={closeText:"Закрыть",prevText:"",nextText:"",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},$.datepicker.setDefaults($.datepicker.regional.ru);$("#blockingInputStart").datepicker({inline:!0,changeYear:!0,gotoCurrent:!0,dateFormat:"dd.mm.yy",minDate:0,showAnim:"slideDown",numberOfMonths:1},$.datepicker.regional.ru).on("change",function(){$("#blockingInputFinish").datepicker("option","minDate",function(e){var t;try{t=$.datepicker.parseDate("dd.mm.yy",e.value)}catch(e){t=null,console.log(t)}return t}(this))}),$("#blockingInputFinish").datepicker({inline:!0,changeYear:!0,gotoCurrent:!0,showAnim:"slideDown",numberOfMonths:1},$.datepicker.regional.ru)})),console.log(window.innerWidth),window.innerWidth<=1200&&(main=document.querySelector("main"),console.log(main),main.style.marginTop="50px");var mobileButtonOpen=document.getElementById("openMenu"),mobileButtonClose=document.getElementById("closeMenu"),navigationMenu=document.querySelector(".navigation-section--mobile");mobileButtonOpen.addEventListener("click",function(){mobileButtonClose.classList.add("menu-open--opened"),navigationMenu.classList.toggle("js--transformed")}),mobileButtonClose.addEventListener("click",function(){navigationMenu.classList.toggle("js--transformed")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJyZWNvdmVyX2J1dHRvbiIsImNvbmZpcm1fYnV0dG9uIiwiYXBwbHlfZm9ybSIsInJlY292ZXJfZm9ybSIsInJldHVybl9mb3JtIiwiYWxsTGluayIsImN1cnJlbnRMb2NhdGlvbiIsInNlbGVjdElucHV0RmllbGQiLCJhbGxPcHRpb25zQXJyYXkiLCJzZWxlY3RNb2RhbFdpbmRvdyIsInNpZGViYXJTZWFyY2hGb3JtIiwic2lkZWJhclNlYXJjaElucHV0Iiwic2VhcmNoRmllbGRSZXN1bHQiLCJzZWFyY2hSZXN1bHQiLCJjYWxlbmRhckxhYmVscyIsImNhbGVuZGFySW5wdXRzIiwibWFpbiIsImRpc3BsYXlTZWxlY3RWYWx1ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJjaGVja2VkVmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJ0ZXh0Q29udGVudCIsInZhbHVlIiwidW5jaGVja0V2ZXJ5U3BhbiIsIm5ld0VsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJmb3JtYXRlZExpbmsiLCJyZXBsYWNlIiwiaW5jbHVkZXMiLCJhZGQiLCJyZW1vdmUiLCJzZWFyY2hWYWx1ZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJnZXRJdGVtIiwiY29uc29sZSIsImxvZyIsImxheWVyIiwiZWxlbSIsImNvbnRhaW5zIiwiJCIsImRhdGVwaWNrZXIiLCJyZWdpb25hbCIsImNsb3NlVGV4dCIsInByZXZUZXh0IiwibmV4dFRleHQiLCJjdXJyZW50VGV4dCIsIm1vbnRoTmFtZXMiLCJtb250aE5hbWVzU2hvcnQiLCJkYXlOYW1lcyIsImRheU5hbWVzU2hvcnQiLCJkYXlOYW1lc01pbiIsIndlZWtIZWFkZXIiLCJkYXRlRm9ybWF0IiwiZmlyc3REYXkiLCJpc1JUTCIsInNob3dNb250aEFmdGVyWWVhciIsInllYXJTdWZmaXgiLCJzZXREZWZhdWx0cyIsImlubGluZSIsImNoYW5nZVllYXIiLCJnb3RvQ3VycmVudCIsIm1pbkRhdGUiLCJzaG93QW5pbSIsIm51bWJlck9mTW9udGhzIiwib24iLCJkYXRlIiwicGFyc2VEYXRlIiwiZXJyb3IiLCJnZXREYXRlIiwidGhpcyIsImlubmVyV2lkdGgiLCJzdHlsZSIsIm1hcmdpblRvcCIsIm1vYmlsZUJ1dHRvbk9wZW4iLCJtb2JpbGVCdXR0b25DbG9zZSIsIm5hdmlnYXRpb25NZW51Il0sIm1hcHBpbmdzIjoiYUFBQSxJQUNBQSxlQU9BQyxlQU9BQyxXQU9BQyxhQU1BQyxZQUlBQyxRQUNBQyxnQkFlQUMsaUJBQ0FDLGdCQUNBQyxrQkE0Q0FDLGtCQUNBQyxtQkFZQUMsa0JBQ0FDLGFBV0FDLGVBcUJBQyxlQTJIQUMsS0E5TEEsU0FBQUMscUJBQ0EsSUFBQVYsRUFBQVcsU0FBQUMsZUFBQSxjQUNBRCxTQUFBRSxpQkFBQSxzQkFDQUMsUUFBQSxTQUFBQyxHQUNBLElBRUFDLEVBREEsV0FEQUQsRUFBQUUsYUFBQSxrQkFFQUQsRUFBQUQsRUFBQUcsWUFDQWxCLEVBQUFtQixNQUFBSCxLQUtBLFNBQUFJLG1CQUNBVCxTQUFBRSxpQkFBQSxzQkFDQUMsUUFBQSxTQUFBTyxHQUNBQSxFQUFBQyxhQUFBLGVBQUEsZUF4RkFYLFNBQUFZLGNBQUEseUJBQ0E5QixlQUFBa0IsU0FBQVksY0FBQSx3QkFDQUMsaUJBQUEsUUFBQSxXQUNBN0IsV0FBQThCLFVBQUFDLE9BQUEsY0FDQTlCLGFBQUE2QixVQUFBQyxPQUFBLGdCQUdBZixTQUFBWSxjQUFBLDBCQUNBN0IsZUFBQWlCLFNBQUFZLGNBQUEseUJBQ0FDLGlCQUFBLFFBQUEsV0FDQTVCLGFBQUE2QixVQUFBQyxPQUFBLGNBQ0E3QixZQUFBNEIsVUFBQUMsT0FBQSxnQkFHQWYsU0FBQVks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QUFDLElBQUFiLE9BQUFnRCxZQUVBaEQsT0FBQWdELFlBQUEsT0FDQXBFLEtBQUFFLFNBQUFZLGNBQUEsUUFDQWtCLFFBQUFDLElBQUFqQyxNQUNBQSxLQUFBcUUsTUFBQUMsVUFBQSxRQUdBLElBQUFDLGlCQUFBckUsU0FBQUMsZUFBQSxZQUNBcUUsa0JBQUF0RSxTQUFBQyxlQUFBLGFBQ0FzRSxlQUFBdkUsU0FBQVksY0FBQSwrQkFDQXlELGlCQUFBeEQsaUJBQUEsUUFBQSxXQUNBeUQsa0JBQUF4RCxVQUFBVSxJQUFBLHFCQUNBK0MsZUFBQXpELFVBQUFDLE9BQUEscUJBRUF1RCxrQkFBQXpELGlCQUFBLFFBQUEsV0FDQTBELGVBQUF6RCxVQUFBQyxPQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hdXRoLWZvcm1fX3JlY292ZXJcIikpIHtcbiAgICB2YXIgcmVjb3Zlcl9idXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmF1dGgtZm9ybV9fcmVjb3ZlclwiKTtcbiAgICByZWNvdmVyX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBhcHBseV9mb3JtLmNsYXNzTGlzdC50b2dnbGUoXCJqcy0taGlkZGVuXCIpO1xuICAgICAgICByZWNvdmVyX2Zvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImpzLS1oaWRkZW5cIik7XG4gICAgfSk7XG59XG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hdXRoLWZvcm1fX2NvbnRpbnVlXCIpKSB7XG4gICAgdmFyIGNvbmZpcm1fYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hdXRoLWZvcm1fX2NvbnRpbnVlXCIpO1xuICAgIGNvbmZpcm1fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHJlY292ZXJfZm9ybS5jbGFzc0xpc3QudG9nZ2xlKFwianMtLWhpZGRlblwiKTtcbiAgICAgICAgcmV0dXJuX2Zvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImpzLS1oaWRkZW5cIik7XG4gICAgfSk7XG59XG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWFwcGx5LXJlY292ZXJcIikpIHtcbiAgICB2YXIgYXBwbHlfZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1hcHBseS1yZWNvdmVyXCIpO1xuXG4gICAgYXBwbHlfZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xufVxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1yZWNvdmVyLWNoZWNrXCIpKSB7XG4gICAgdmFyIHJlY292ZXJfZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1yZWNvdmVyLWNoZWNrXCIpO1xuICAgIHJlY292ZXJfZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xufVxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1yZXR1cm4tbG9naW5cIikpIHtcbiAgICB2YXIgcmV0dXJuX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tcmV0dXJuLWxvZ2luXCIpO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZpZ2F0aW9uLW1lbnVfX2l0ZW0tbGlua1wiKSkge1xuICAgIHZhciBhbGxMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZpZ2F0aW9uLW1lbnVfX2l0ZW0tbGlua1wiKTtcbiAgICB2YXIgY3VycmVudExvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG5cbiAgICBhbGxMaW5rLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgdmFyIGxpbmsgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImhyZWZcIik7XG4gICAgICAgIHZhciBmb3JtYXRlZExpbmsgPSBsaW5rLnJlcGxhY2UoXCIuL1wiLCBcIlwiKTtcbiAgICAgICAgaWYgKGN1cnJlbnRMb2NhdGlvbi5pbmNsdWRlcyhmb3JtYXRlZExpbmspKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpdGVtLS1jaGVja2VkXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8vINCe0L/QtdGA0LDRhtC40Lgg0YEg0YLQsNGA0LjRhNCw0LzQuFxuXG4vLyDQodC90LDRh9Cw0LvQsCDQv9C+0LvRg9GH0LjQvCDQuCDQstGL0LLQtdC00LXQvCDQt9C90LDRh9C10L3QuNC1INC+0YLQvNC10YfQtdC90L3QvtCz0L4gb3B0aW9uXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyYXRlU2VsZWN0XCIpKSB7XG4gICAgdmFyIHNlbGVjdElucHV0RmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJhdGVTZWxlY3RcIik7XG4gICAgdmFyIGFsbE9wdGlvbnNBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmF0ZS1mb3JtX19vcHRpb25cIik7XG4gICAgdmFyIHNlbGVjdE1vZGFsV2luZG93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyYXRlTW9kYWxcIik7XG4gICAgZGlzcGxheVNlbGVjdFZhbHVlKCk7XG4gICAgLy8g0J/QviDQutC70LjQutGDINC80LXQvdGP0LXQvCDQt9C90LDRh9C10L3QuNC1IGRhdGEtY2hlY2tlZFxuICAgIGFsbE9wdGlvbnNBcnJheS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHVuY2hlY2tFdmVyeVNwYW4oKTtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1jaGVja2VkXCIsIFwiY2hlY2tlZFwiKTtcbiAgICAgICAgICAgIGRpc3BsYXlTZWxlY3RWYWx1ZSgpO1xuICAgICAgICAgICAgc2VsZWN0TW9kYWxXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZShcImpzLS1oaWRkZW5cIik7XG4gICAgICAgICAgICBzZWxlY3RJbnB1dEZpZWxkLmNsYXNzTGlzdC50b2dnbGUoXCJqcy0tcm90YXRlLWFycm93XCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBzZWxlY3RJbnB1dEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHNlbGVjdElucHV0RmllbGQuY2xhc3NMaXN0LnRvZ2dsZShcImpzLS1yb3RhdGUtYXJyb3dcIik7XG4gICAgICAgIHNlbGVjdE1vZGFsV2luZG93LmNsYXNzTGlzdC50b2dnbGUoXCJqcy0taGlkZGVuXCIpO1xuICAgIH0pO1xuXG4gICAgc2VsZWN0TW9kYWxXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCkgPT4ge1xuICAgICAgICBzZWxlY3RJbnB1dEZpZWxkLmNsYXNzTGlzdC50b2dnbGUoXCJqcy0tcm90YXRlLWFycm93XCIpO1xuICAgICAgICBzZWxlY3RNb2RhbFdpbmRvdy5jbGFzc0xpc3QuYWRkKFwianMtLWhpZGRlblwiKTtcbiAgICB9KTtcbn1cbi8vINCf0LXRgNC10LTQsNGH0LAgZGF0YS1jaGVja2VkINC30L3QsNGH0LXQvdC40Y8g0LIg0L/QvtC70LUgU2VsZWN0XG5mdW5jdGlvbiBkaXNwbGF5U2VsZWN0VmFsdWUoKSB7XG4gICAgdmFyIHNlbGVjdElucHV0RmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJhdGVTZWxlY3RcIik7XG4gICAgdmFyIGFsbE9wdGlvbnNBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmF0ZS1mb3JtX19vcHRpb25cIik7XG4gICAgYWxsT3B0aW9uc0FycmF5LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgdmFyIGNoZWNrZWRCb29sID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNoZWNrZWRcIik7XG4gICAgICAgIGlmIChjaGVja2VkQm9vbCA9PSBcImNoZWNrZWRcIikge1xuICAgICAgICAgICAgdmFyIGNoZWNrZWRWYWx1ZSA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICBzZWxlY3RJbnB1dEZpZWxkLnZhbHVlID0gY2hlY2tlZFZhbHVlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVuY2hlY2tFdmVyeVNwYW4oKSB7XG4gICAgdmFyIGFsbE9wdGlvbnNBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmF0ZS1mb3JtX19vcHRpb25cIik7XG4gICAgYWxsT3B0aW9uc0FycmF5LmZvckVhY2goKG5ld0VsZW1lbnQpID0+IHtcbiAgICAgICAgbmV3RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNoZWNrZWRcIiwgXCJ1bmNoZWNrZWRcIik7XG4gICAgfSk7XG59XG5cbi8vINCe0LHRgNCw0LHQvtGC0LrQsCDRhNC+0YDQvNGLINC/0L7QuNGB0LrQsCDQsiDQsdC+0LrQvtCy0L7QvCDQvNC10L3RjlxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLXNlY3Rpb24tLWZvcm0gXCIpKSB7XG4gICAgdmFyIHNpZGViYXJTZWFyY2hGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtc2VjdGlvbi0tZm9ybVwiKTtcbiAgICB2YXIgc2lkZWJhclNlYXJjaElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgXCIuaW5wdXQtc2VjdGlvbl9fc2VhcmNoLWlucHV0XCJcbiAgICApO1xuICAgIHNpZGViYXJTZWFyY2hGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgIHZhciBzZWFyY2hWYWx1ZSA9IHNpZGViYXJTZWFyY2hJbnB1dC52YWx1ZTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzZWFyY2hSZXN1bHRcIiwgc2VhcmNoVmFsdWUpO1xuICAgIH0pO1xufVxuXG4vLyDQoNC10LfRg9C70YzRgtCw0YLRiyDQv9C+0LjRgdC60LBcblxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoRmllbGRcIikpIHtcbiAgICB2YXIgc2VhcmNoRmllbGRSZXN1bHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlYXJjaEZpZWxkXCIpO1xuICAgIHZhciBzZWFyY2hSZXN1bHQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNlYXJjaFJlc3VsdFwiKTtcbiAgICBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNlYXJjaFJlc3VsdFwiKSk7XG4gICAgc2VhcmNoRmllbGRSZXN1bHQudmFsdWUgPSBzZWFyY2hSZXN1bHQ7XG4gICAgaWYgKHNlYXJjaEZpZWxkUmVzdWx0LnZhbHVlID09IFwi0J/Qu9Cw0YLQtdC2XCIpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmdWxsUmVzdWx0XCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy0taGlkZGVuXCIpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVtcHR5UmVzdWx0XCIpLmNsYXNzTGlzdC5hZGQoXCJqcy0taGlkZGVuXCIpO1xuICAgIH1cbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmxvY2tpbmctZm9ybV9faW5wdXRcIikpIHtcbiAgICAvLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQv9C+0LTQu9C+0LbQutC4XG4gICAgdmFyIGNhbGVuZGFyTGFiZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ibG9ja2luZy1mb3JtX19sYWJlbFwiKTtcbiAgICBjYWxlbmRhckxhYmVscy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHZhciBsYXllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FsZW5kYXItbGF5ZXJcIik7XG4gICAgICAgICAgICBsYXllci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxheWVyLmNsYXNzTGlzdC5hZGQoXCJqcy0taGlkZGVuXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGF5ZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLS1oaWRkZW5cIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBjYWxlbmRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudWktZGF0ZXBpY2tlclwiKTtcbiAgICAgICAgICAgIHZhciBhbGxMaW5rcyA9IGNhbGVuZGFyLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0ZFwiKTtcbiAgICAgICAgICAgIGFsbExpbmtzLmZvckVhY2goKGVsZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwidWktZGF0ZXBpY2tlci11bnNlbGVjdGFibGVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xhc3NMaXN0LmFkZChcImpzLS1oaWRkZW5cIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICB2YXIgY2FsZW5kYXJJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0LWZvcm1fX2lucHV0XCIpO1xuICAgIGNhbGVuZGFySW5wdXRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdmFyIGxheWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYWxlbmRhci1sYXllclwiKTtcbiAgICAgICAgICAgIGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGF5ZXIuY2xhc3NMaXN0LmFkZChcImpzLS1oaWRkZW5cIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBsYXllci5jbGFzc0xpc3QucmVtb3ZlKFwianMtLWhpZGRlblwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGNhbGVuZGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51aS1kYXRlcGlja2VyXCIpO1xuICAgICAgICAgICAgdmFyIGFsbExpbmtzID0gY2FsZW5kYXIucXVlcnlTZWxlY3RvckFsbChcInRkXCIpO1xuICAgICAgICAgICAgYWxsTGlua3MuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJ1aS1kYXRlcGlja2VyLXVuc2VsZWN0YWJsZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbGFzc0xpc3QuYWRkKFwianMtLWhpZGRlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8vINCj0LHQuNGA0LDQvdC40LUg0L/QvtC00LvQvtC20LrQuFxuXG4gICAgJChmdW5jdGlvbigpIHtcbiAgICAgICAgJC5kYXRlcGlja2VyLnJlZ2lvbmFsW1wicnVcIl0gPSB7XG4gICAgICAgICAgICBjbG9zZVRleHQ6IFwi0JfQsNC60YDRi9GC0YxcIixcbiAgICAgICAgICAgIHByZXZUZXh0OiBcIlwiLFxuICAgICAgICAgICAgbmV4dFRleHQ6IFwiXCIsXG4gICAgICAgICAgICBjdXJyZW50VGV4dDogXCLQodC10LPQvtC00L3Rj1wiLFxuICAgICAgICAgICAgbW9udGhOYW1lczogW1xuICAgICAgICAgICAgICAgIFwi0K/QvdCy0LDRgNGMXCIsXG4gICAgICAgICAgICAgICAgXCLQpNC10LLRgNCw0LvRjFwiLFxuICAgICAgICAgICAgICAgIFwi0JzQsNGA0YJcIixcbiAgICAgICAgICAgICAgICBcItCQ0L/RgNC10LvRjFwiLFxuICAgICAgICAgICAgICAgIFwi0JzQsNC5XCIsXG4gICAgICAgICAgICAgICAgXCLQmNGO0L3RjFwiLFxuICAgICAgICAgICAgICAgIFwi0JjRjtC70YxcIixcbiAgICAgICAgICAgICAgICBcItCQ0LLQs9GD0YHRglwiLFxuICAgICAgICAgICAgICAgIFwi0KHQtdC90YLRj9Cx0YDRjFwiLFxuICAgICAgICAgICAgICAgIFwi0J7QutGC0Y/QsdGA0YxcIixcbiAgICAgICAgICAgICAgICBcItCd0L7Rj9Cx0YDRjFwiLFxuICAgICAgICAgICAgICAgIFwi0JTQtdC60LDQsdGA0YxcIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBtb250aE5hbWVzU2hvcnQ6IFtcbiAgICAgICAgICAgICAgICBcItCv0L3QstCw0YDRjFwiLFxuICAgICAgICAgICAgICAgIFwi0KTQtdCy0YDQsNC70YxcIixcbiAgICAgICAgICAgICAgICBcItCc0LDRgNGCXCIsXG4gICAgICAgICAgICAgICAgXCLQkNC/0YDQtdC70YxcIixcbiAgICAgICAgICAgICAgICBcItCc0LDQuVwiLFxuICAgICAgICAgICAgICAgIFwi0JjRjtC90YxcIixcbiAgICAgICAgICAgICAgICBcItCY0Y7Qu9GMXCIsXG4gICAgICAgICAgICAgICAgXCLQkNCy0LPRg9GB0YJcIixcbiAgICAgICAgICAgICAgICBcItCh0LXQvdGC0Y/QsdGA0YxcIixcbiAgICAgICAgICAgICAgICBcItCe0LrRgtGP0LHRgNGMXCIsXG4gICAgICAgICAgICAgICAgXCLQndC+0Y/QsdGA0YxcIixcbiAgICAgICAgICAgICAgICBcItCU0LXQutCw0LHRgNGMXCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZGF5TmFtZXM6IFtcbiAgICAgICAgICAgICAgICBcItCy0L7RgdC60YDQtdGB0LXQvdGM0LVcIixcbiAgICAgICAgICAgICAgICBcItC/0L7QvdC10LTQtdC70YzQvdC40LpcIixcbiAgICAgICAgICAgICAgICBcItCy0YLQvtGA0L3QuNC6XCIsXG4gICAgICAgICAgICAgICAgXCLRgdGA0LXQtNCwXCIsXG4gICAgICAgICAgICAgICAgXCLRh9C10YLQstC10YDQs1wiLFxuICAgICAgICAgICAgICAgIFwi0L/Rj9GC0L3QuNGG0LBcIixcbiAgICAgICAgICAgICAgICBcItGB0YPQsdCx0L7RgtCwXCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZGF5TmFtZXNTaG9ydDogW1wi0LLRgdC6XCIsIFwi0L/QvdC0XCIsIFwi0LLRgtGAXCIsIFwi0YHRgNC0XCIsIFwi0YfRgtCyXCIsIFwi0L/RgtC9XCIsIFwi0YHQsdGCXCJdLFxuICAgICAgICAgICAgZGF5TmFtZXNNaW46IFtcItCS0YFcIiwgXCLQn9C9XCIsIFwi0JLRglwiLCBcItCh0YBcIiwgXCLQp9GCXCIsIFwi0J/RglwiLCBcItCh0LFcIl0sXG4gICAgICAgICAgICB3ZWVrSGVhZGVyOiBcItCd0LXQtFwiLFxuICAgICAgICAgICAgZGF0ZUZvcm1hdDogXCJkZC5tbS55eVwiLFxuICAgICAgICAgICAgZmlyc3REYXk6IDEsXG4gICAgICAgICAgICBpc1JUTDogZmFsc2UsXG4gICAgICAgICAgICBzaG93TW9udGhBZnRlclllYXI6IGZhbHNlLFxuICAgICAgICAgICAgeWVhclN1ZmZpeDogXCJcIixcbiAgICAgICAgfTtcbiAgICAgICAgJC5kYXRlcGlja2VyLnNldERlZmF1bHRzKCQuZGF0ZXBpY2tlci5yZWdpb25hbFtcInJ1XCJdKTtcbiAgICAgICAgdmFyIGRhdGVGb3JtYXQgPSBcImRkLm1tLnl5XCIsXG4gICAgICAgICAgICBmcm9tID0gJChcIiNibG9ja2luZ0lucHV0U3RhcnRcIilcbiAgICAgICAgICAgIC5kYXRlcGlja2VyKHtcbiAgICAgICAgICAgICAgICAgICAgaW5saW5lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VZZWFyOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBnb3RvQ3VycmVudDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdDogXCJkZC5tbS55eVwiLFxuICAgICAgICAgICAgICAgICAgICBtaW5EYXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICBzaG93QW5pbTogXCJzbGlkZURvd25cIixcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZNb250aHM6IDEsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAkLmRhdGVwaWNrZXIucmVnaW9uYWxbXCJydVwiXVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoXCIjYmxvY2tpbmdJbnB1dEZpbmlzaFwiKS5kYXRlcGlja2VyKFxuICAgICAgICAgICAgICAgICAgICBcIm9wdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBcIm1pbkRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgZ2V0RGF0ZSh0aGlzKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHRvID0gJChcIiNibG9ja2luZ0lucHV0RmluaXNoXCIpLmRhdGVwaWNrZXIoe1xuICAgICAgICAgICAgICAgICAgICBpbmxpbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZVllYXI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGdvdG9DdXJyZW50OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzaG93QW5pbTogXCJzbGlkZURvd25cIixcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZNb250aHM6IDEsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAkLmRhdGVwaWNrZXIucmVnaW9uYWxbXCJydVwiXVxuICAgICAgICAgICAgKTtcblxuICAgICAgICBmdW5jdGlvbiBnZXREYXRlKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBkYXRlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBkYXRlID0gJC5kYXRlcGlja2VyLnBhcnNlRGF0ZShkYXRlRm9ybWF0LCBlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGF0ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBkYXRlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmNvbnNvbGUubG9nKHdpbmRvdy5pbm5lcldpZHRoKTtcblxuaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDEyMDApIHtcbiAgICB2YXIgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluXCIpO1xuICAgIGNvbnNvbGUubG9nKG1haW4pO1xuICAgIG1haW4uc3R5bGUubWFyZ2luVG9wID0gXCI1MHB4XCI7XG59XG5cbnZhciBtb2JpbGVCdXR0b25PcGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvcGVuTWVudVwiKTtcbnZhciBtb2JpbGVCdXR0b25DbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2VNZW51XCIpO1xudmFyIG5hdmlnYXRpb25NZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZpZ2F0aW9uLXNlY3Rpb24tLW1vYmlsZVwiKTtcbm1vYmlsZUJ1dHRvbk9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBtb2JpbGVCdXR0b25DbG9zZS5jbGFzc0xpc3QuYWRkKFwibWVudS1vcGVuLS1vcGVuZWRcIik7XG4gICAgbmF2aWdhdGlvbk1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImpzLS10cmFuc2Zvcm1lZFwiKTtcbn0pO1xubW9iaWxlQnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBuYXZpZ2F0aW9uTWVudS5jbGFzc0xpc3QudG9nZ2xlKFwianMtLXRyYW5zZm9ybWVkXCIpO1xufSk7Il19
